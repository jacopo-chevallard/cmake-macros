# An external project for FORTRANPARSER
set ( FORTRANPARSER_PREFIX ${CMAKE_BINARY_DIR}/dependencies )

set ( FORTRANPARSER_SOURCE  ${FORTRANPARSER_PREFIX}/fortranparser-src )
set ( FORTRANPARSER_BINARY  ${FORTRANPARSER_PREFIX}/fortranparser )
set ( FORTRANPARSER_INSTALL ${CMAKE_INSTALL_PREFIX} )

set(FORTRANPARSER_LIBRARY_NAME fortranparser)
set (FORTRANPARSER_CMAKE_LIBDIR ${CMAKE_INSTALL_PREFIX}/lib)
set (FORTRANPARSER_CMAKE_INCLUDEDIR ${CMAKE_INSTALL_PREFIX}/include/${FORTRANPARSER_LIBRARY_NAME})

ExternalProject_Add(
  EXT_fortranparser
  DOWNLOAD_DIR ${FORTRANPARSER_PREFIX}
  SOURCE_DIR ${FORTRANPARSER_SOURCE}
  BINARY_DIR ${FORTRANPARSER_BINARY}
  INSTALL_DIR ${FORTRANPARSER_INSTALL}
  URL $ENV{CMAKE_DEPENDENCIES}/archives/FortranParser-2.0.3.tar.gz
  CMAKE_ARGS -DCMAKE_Fortran_COMPILER=${CMAKE_Fortran_COMPILER} -DCMAKE_Fortran_FLAGS=${CMAKE_Fortran_FLAGS} -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR> -DCMAKE_NO_DEFAULT_PATH=${CMAKE_NO_DEFAULT_PATH} -DCMAKE_PARENT_SOURCE_DIR=${CMAKE_CURRENT_SOURCE_DIR} -DCMAKE_LIBRARY_TYPE=${CMAKE_LIBRARY_TYPE}
  )

set ( FORTRANPARSER_INCLUDE_DIR ${FORTRANPARSER_CMAKE_INCLUDEDIR} CACHE INTERNAL "FORTRANPARSER include directory" )
set ( FORTRANPARSER_LIBRARIES "${FORTRANPARSER_CMAKE_LIBDIR}/${CMAKE_LIBRARY_PREFIX}${FORTRANPARSER_LIBRARY_NAME}${CMAKE_LIBRARY_SUFFIX}" CACHE INTERNAL "FORTRANPARSER library" )
