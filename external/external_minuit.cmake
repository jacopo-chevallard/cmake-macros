# An external project for MINUIT
set ( MINUIT_PREFIX "${CMAKE_BINARY_DIR}/dependencies" )

set ( MINUIT_SOURCE  "${MINUIT_PREFIX}/minuit-src" )
set ( MINUIT_BINARY  "${MINUIT_PREFIX}/minuit" )
set ( MINUIT_INSTALL ${CMAKE_INSTALL_PREFIX} )

ExternalProject_Add(
  EXT_minuit
  DOWNLOAD_DIR ${MINUIT_PREFIX}
  SOURCE_DIR ${MINUIT_SOURCE}
  BINARY_DIR ${MINUIT_BINARY}
  INSTALL_DIR ${MINUIT_INSTALL}
  URL $ENV{CMAKE_DEPENDENCIES}/archives/minuit-fortran.tar.gz
  PATCH_COMMAND cp $ENV{CMAKE_MACROS}/external/minuit/CMakeLists.txt <SOURCE_DIR>
  CMAKE_ARGS -DCMAKE_Fortran_COMPILER=${CMAKE_Fortran_COMPILER} -DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER} -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER} -DCMAKE_Fortran_FLAGS=${CMAKE_Fortran_FLAGS} -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR> -DCMAKE_NO_DEFAULT_PATH=${CMAKE_NO_DEFAULT_PATH} -DSHIPPABLE=${SHIPPABLE} -DCMAKE_PARENT_SOURCE_DIR=${CMAKE_CURRENT_SOURCE_DIR} -DCMAKE_LIBRARY_TYPE=${CMAKE_LIBRARY_TYPE}
  )

set ( MINUIT_INCLUDE_DIR "${MINUIT_INSTALL}/include" CACHE INTERNAL "MINUIT include directory" )
set ( MINUIT_LIBRARIES_DIR "${MINUIT_INSTALL}/lib" CACHE INTERNAL "MINUIT library directory" )
set ( MINUIT_LIBRARIES "minuit" CACHE INTERNAL "MINUIT library" )


