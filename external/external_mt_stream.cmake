# An external project for MT_STREAM
# URL http://theo.phys.sci.hiroshima-u.ac.jp/~ishikawa/PRNG/mt_stream_f90-1.11.tar.gz
set ( MT_STREAM_PREFIX ${CMAKE_BINARY_DIR}/dependencies )

set ( MT_STREAM_SOURCE  ${MT_STREAM_PREFIX}/mt_stream-src )
set ( MT_STREAM_BINARY  ${MT_STREAM_PREFIX}/mt_stream )
set ( MT_STREAM_INSTALL ${CMAKE_INSTALL_PREFIX} )

set(MT_STREAM_LIBRARY_NAME mt_stream)
set (MT_STREAM_CMAKE_LIBDIR ${CMAKE_INSTALL_PREFIX}/lib)
set (MT_STREAM_CMAKE_INCLUDEDIR ${CMAKE_INSTALL_PREFIX}/include/${MT_STREAM_LIBRARY_NAME})

ExternalProject_Add(
  EXT_mt_stream
  DOWNLOAD_DIR ${MT_STREAM_PREFIX}
  SOURCE_DIR ${MT_STREAM_SOURCE}
  BINARY_DIR ${MT_STREAM_BINARY}
  INSTALL_DIR ${MT_STREAM_INSTALL}
  URL $ENV{CMAKE_DEPENDENCIES}/archives/mt_stream_f90-1.11.tar.gz
  PATCH_COMMAND cp $ENV{CMAKE_MACROS}/external/mt_stream/CMakeLists.txt <SOURCE_DIR>
  CMAKE_ARGS -DCMAKE_Fortran_COMPILER=${CMAKE_Fortran_COMPILER} -DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER} -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER} -DCMAKE_Fortran_FLAGS=${CMAKE_Fortran_FLAGS} -DCMAKE_CXX_FLAGS=${CMAKE_CXX_FLAGS} -DCMAKE_C_FLAGS=${CMAKE_C_FLAGS} -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR> -DCMAKE_NO_DEFAULT_PATH=${CMAKE_NO_DEFAULT_PATH} -DSHIPPABLE=${SHIPPABLE} -DCMAKE_PARENT_SOURCE_DIR=${CMAKE_CURRENT_SOURCE_DIR} -DCMAKE_LIBRARY_TYPE=${CMAKE_LIBRARY_TYPE}
  )

set ( MT_STREAM_INCLUDE_DIR ${MT_STREAM_CMAKE_INCLUDEDIR} CACHE INTERNAL "MT_STREAM include directory" )
set ( MT_STREAM_LIBRARIES "${MT_STREAM_CMAKE_LIBDIR}/${CMAKE_LIBRARY_PREFIX}${MT_STREAM_LIBRARY_NAME}${CMAKE_LIBRARY_SUFFIX}" CACHE INTERNAL "MT_STREAM library" )
